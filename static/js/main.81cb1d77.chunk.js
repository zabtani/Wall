(this["webpackJsonpwall-app"]=this["webpackJsonpwall-app"]||[]).push([[0],{106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(10),i=n.n(c),o=(n(79),n(18)),s=n.n(o),l=n(12),u=n(26),j=n(11),b=n(53),d=n.n(b),h=n(2),p=function(){return Object(h.jsx)(d.a,{type:"Oval",style:{padding:"5%"},color:"#00BFFF",height:100,width:100})},m=n(137),O=n(141),f=n(142),x=n(143),v=n(38),g=n.n(v);var y=function(e){return Object(h.jsxs)(m.a,{className:e.preview?g.a.previewStory:g.a.story,children:[Object(h.jsx)(O.a,{className:g.a.media,image:e.image,title:e.title}),Object(h.jsxs)(f.a,{className:g.a.content,children:[Object(h.jsx)(x.a,{gutterBottom:!0,variant:"h2",component:"h2",children:e.title}),Object(h.jsxs)(x.a,{gutterBottom:!0,variant:"h3",component:"h3",children:["By ",e.author]}),Object(h.jsx)(x.a,{variant:"body2",color:"textSecondary",component:"p",children:e.description})]})]})},_=n(56),S=n.n(_),w=function(e){return Object(h.jsx)("ul",{className:S.a["stories-list"],children:e.stories.map((function(e){return Object(h.jsx)(y,{title:e.title,author:e.author,description:e.description,image:e.image},e.id)}))})},C=n(17),I=n(39),N=n.n(I),B=n(144),k=n(57),W=n.n(k),E=n(58),T=n.n(E),L=n(34),P=n.n(L),F=function(e){var t=e.isNext,n=e.error,r=e.move;return Object(h.jsxs)("div",{className:P.a.buttonCon,children:[t&&Object(h.jsx)("span",{className:P.a.buttonText,children:"Next"}),Object(h.jsx)(B.a,{color:"primary",style:{backgroundColor:n?"red":null},onClick:function(){return r(t?"next":"back")},children:t?Object(h.jsx)(W.a,{}):Object(h.jsx)(T.a,{})})," ",!t&&Object(h.jsx)("span",{className:P.a.buttonText,children:"Back"})]})},A=function(e){var t=e.currentStep,n=e.steps,r=e.error,a=e.onError,c=function(r){function c(){var a="next"===r?1:-1,c=n.indexOf(t)+a;e.onStepChange(n[c])}if(e.onError(null),"next"===r){var i=e.onStepValidation(t);i?(a(i),setTimeout((function(){a(!1)}),1500)):c()}else c()},i=t===n[0],o=t===n[n.length-1],s={justifyContent:i?"flex-end":"space-between"};return Object(h.jsxs)("div",{className:P.a.navigationButtons,style:s,children:[!i&&Object(h.jsx)(F,{move:c,isNext:!1,error:!1}),!o&&Object(h.jsx)(F,{move:c,isNext:!0,error:r})]})},D={containSpecialChars:new RegExp(/[$&+,:;=?@#|'<>.^*()%!-]/),containDigit:new RegExp(/\d/)},J=n(145),H=n(14),V=n(28),z=n.n(V),R=n(59),Y=Object(R.a)({accessKey:"0oJhi_V8eHNlNtyOLjykytXjPWxFd79JZ7FWUduq0vk"}),K=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,e.next=4,Y.search.getPhotos({query:t});case 4:e.sent.response.results.forEach((function(e){n.push({id:e.id,url:e.urls.regular})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Z=n(148),q=n(146),M=n(147),U=n(61),X=n.n(U);var G=function(e){var t=Object(r.useRef)(),n=Object(r.useState)([]),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)([]),b=Object(j.a)(o,2),d=b[0],m=b[1],O=Object(r.useState)(!1),f=Object(j.a)(O,2),x=f[0],v=f[1],g=Object(r.useState)(!1),y=Object(j.a)(g,2),_=y[0],S=y[1],w=e.onImageChoice,C=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),m([]),i([]),e.next=5,K(t);case 5:n=e.sent,m(n),S(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){e.searchTerm&&C(e.searchTerm),w(null)}),[e.searchTerm,w]);var I={variant:"contained",color:"primary"};return Object(h.jsxs)("div",{className:z.a.optionalImgsCon,style:{display:e.display},children:[Object(h.jsxs)("div",{className:z.a.searchBox,children:[x?Object(h.jsx)(Z.a,{inputRef:t,type:"search",variant:"outlined",label:"search term.."}):Object(h.jsxs)("span",{className:z.a.searchBoxText,children:["Dont like this results? ",Object(h.jsx)("br",{})]}),Object(h.jsx)("div",{className:z.a.buttonCon,children:x?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(J.a,Object(l.a)(Object(l.a)({},I),{},{onClick:function(){return function(){var e=t.current.value;e&&(C(e),w(null),v(!1))}()},children:"Search"})),Object(h.jsx)(J.a,Object(l.a)(Object(l.a)({},{variant:"contained",color:"secondary"}),{},{onClick:function(){return v(!1)},children:"Cancel"}))]}):Object(h.jsx)(J.a,Object(l.a)(Object(l.a)({startIcon:Object(h.jsx)(X.a,{})},I),{},{onClick:function(){return v(!0)},children:"Click to search"}))})]}),d.length>0?Object(h.jsx)(q.a,{rowHeight:e.screenWidth>650?260:160,className:z.a.optionalImgs,cols:e.screenWidth>650?5:2,children:d.map((function(t){var n=e.chosenImg&&e.chosenImg===t.id?z.a.chosenImg:"";return Object(h.jsxs)(M.a,{className:n,cols:1,children:[Object(h.jsx)("img",{onClick:function(){return function(t){e.onImageChoice(t)}(t)},style:{display:c.includes(t.id)?"block":"none"},onLoad:function(){return e=t.id,void i((function(t){return[].concat(Object(H.a)(t),[e])}));var e},src:t.url,alt:"gallery img"}),!c.includes(t.id)&&Object(h.jsx)(p,{})]},t.id)}))}):_?"searching":"couldent find optional images for your story title."]})},$=function(e){var t="description"===e.name,n=e.screenWidth<650,r=n?"90%":"35%",a=n?"90%":"50%",c={InputLabelProps:{style:{fontSize:n?15:22}},InputProps:{style:{fontSize:n?25:45}},value:e.value,type:"text",variant:"filled",label:e.label,onChange:function(t){return e.update(e.name,t)},onBlur:function(t){return e.update(e.name,t)},style:{marginTop:n?"10%":"1%",width:t?a:r,display:e.current===e.name?"flex":"none"},rows:t?10:1};return t?Object(h.jsx)(Z.a,Object(l.a)(Object(l.a)({},c),{},{multiline:!0})):Object(h.jsx)(Z.a,Object(l.a)({},c))},Q=n(62),ee=n.n(Q),te=function(e){var t=e.currentStep,n=e.inputs,r=e.steps,a=e.onSubmit,c=Object(j.a)(r,5),i=c[0],o=c[1],s=c[2],l=c[3],u=c[4],b=[i,o,l],d=t===s.name?"block":"none",p=t===u.name;return Object(h.jsxs)("form",{onSubmit:a,children:[b.map((function(r){return Object(h.jsx)($,{name:r.name,current:t,label:r.label,screenWidth:e.screenWidth,update:e.updateInput,value:n[r.name].current},r.name)})),Object(h.jsx)(G,{display:d,chosenImg:n.image?n.image.id:null,onImageChoice:e.onImageChoice,searchTerm:n.title.final,screenWidth:e.screenWidth}),p&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(J.a,{startIcon:Object(h.jsx)(ee.a,{}),variant:"contained",color:"primary",type:"submit",children:"Sure, Post It!"}),Object(h.jsx)(y,{preview:!0,title:n.title.final,author:n.author.final,description:n.description.final,image:n.image.url})]})]})},ne=n(63),re=n.n(ne),ae=n(64),ce=n.n(ae),ie={author:{current:"",final:null},title:{current:"",final:null},image:{url:null,id:null},description:{current:"",final:null}};var oe=function(e){var t=[{name:"author",title:"Who are you?",label:"Your name"},{name:"title",title:"What is your story name?",label:"Story title"},{name:"image",title:"Which image describes it the most?"},{name:"description",title:"So,what happen?",label:"Your story"},{name:"finish",title:"Is that OK?"}],n=Object(r.useState)(!1),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)(t[0]),s=Object(j.a)(o,2),u=s[0],b=s[1],d=Object(r.useState)(ie),p=Object(j.a)(d,2),m=p[0],O=p[1],f=Object(r.useState)(null),x=Object(j.a)(f,2),v=x[0],g=x[1],y=function(){O(ie),b(t[0]),i(!1)},_=Object(r.useCallback)((function(e){O((function(t){return Object(l.a)(Object(l.a)({},t),{},{image:e})}))}),[]);return Object(h.jsxs)("div",{className:N.a.postBar,children:[c&&Object(h.jsxs)("div",{className:N.a.postBarContent,children:[Object(h.jsx)("h2",{children:u.title}),Object(h.jsx)("div",{className:N.a.formError,style:{opacity:v?1:0},children:v}),Object(h.jsx)(A,{currentStep:u.name,steps:t.map((function(e){return e.name})),onStepChange:function(e){return function(e){var n=t.filter((function(t){return t.name===e}))[0];b(n)}(e)},onStepValidation:function(e){var t=function(e,t){var n=null;if("image"===e)null===t&&(n="Must choose an image");else{var r=t.trim();switch(e){case"author":""===r?n="Provide your name below":D.containSpecialChars.test(r)||D.containDigit.test(r)?n="Provide name without special chars or digits":r.length<2&&(n="Name is too short.");break;case"title":""===r&&(n="Provide title below");break;case"description":""===r&&(n="Provide your story below.")}}return n}(e,"image"===e?m.image:m[e].current);return t},onError:g,error:v}),Object(h.jsx)(te,{currentStep:u.name,inputs:m,steps:t,onSubmit:function(t){t.preventDefault();var n={author:m.author.final,title:m.title.final,description:m.description.final,image:m.image.url};e.onAddStory(n),y()},updateInput:function(e,t){var n=t.target.value,r=t._reactName;O((function(t){var a;return"onChange"===r?a=Object(l.a)(Object(l.a)({},t[e]),{},{current:n}):"onBlur"===r&&(a=Object(l.a)(Object(l.a)({},t[e]),{},{final:n})),Object(l.a)(Object(l.a)({},t),{},Object(C.a)({},e,a))})),g(null)},onImageChoice:_,screenWidth:e.screenWidth})]}),Object(h.jsx)(J.a,{style:{alignSelf:c?"flex-start ":"center"},variant:"contained",color:"primary",className:N.a.postToggleButton,onClick:function(){c?y():i((function(e){return!e}))},startIcon:c?Object(h.jsx)(ce.a,{}):Object(h.jsx)(re.a,{}),children:c?"Cancel":"Post your story"})]})};n(106);var se=function(){var e=Object(r.useState)(window.innerWidth),t=Object(j.a)(e,2),n=t[0],c=t[1],i=function(){c(window.innerWidth)};Object(r.useEffect)((function(){return window.addEventListener("resize",i),function(){return window.removeEventListener("resize",i)}}),[]);var o,b=Object(r.useState)([]),d=Object(j.a)(b,2),m=d[0],O=d[1],f=Object(r.useState)(null),x=Object(j.a)(f,2),v=x[0],g=x[1],y=Object(r.useState)(!1),_=Object(j.a)(y,2),S=_[0],C=_[1],I=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t,n,r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(null),C(!0),e.prev=2,e.next=5,fetch("https://react-http-de690-default-rtdb.firebaseio.com/stories.json");case 5:return t=e.sent,e.next=8,t.json();case 8:for(a in n=e.sent,r=[],n)c=n[a],r.push(Object(l.a)({id:a},c));O(r.reverse()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),g("Failed to reach the server");case 17:C(!1);case 18:case"end":return e.stop()}}),e,null,[[2,14]])}))),[]);Object(r.useEffect)((function(){I()}),[I]);var N=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://react-http-de690-default-rtdb.firebaseio.com/stories.json",{method:"POST",body:JSON.stringify(t),"Content-Type":"application/json"});case 3:I(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),g("Failed to save movie on server");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return m.length>0&&(o=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:"Users Stories"}),Object(h.jsx)(w,{stories:m})]})),0===m.length&&(o=Object(h.jsx)("p",{children:"Wall is empty!"})),v&&(o=Object(h.jsx)("p",{children:v})),S&&(o=Object(h.jsx)(p,{})),Object(h.jsxs)(a.a.Fragment,{children:[Object(h.jsx)("section",{children:Object(h.jsx)("h1",{children:"Wall to all "})}),Object(h.jsx)("section",{children:Object(h.jsx)(oe,{screenWidth:n,onAddStory:N})}),Object(h.jsx)("section",{children:o})]})};i.a.render(Object(h.jsx)(se,{}),document.getElementById("root"))},28:function(e,t,n){e.exports={optionalImgsCon:"ImgList_optionalImgsCon__2YE6M",optionalImgs:"ImgList_optionalImgs__3mtgb",chosenImg:"ImgList_chosenImg__19cJS",searchBox:"ImgList_searchBox__3OGjD",buttonCon:"ImgList_buttonCon__2C0oN",searchBoxText:"ImgList_searchBoxText__2X90j"}},34:function(e,t,n){e.exports={navigationButtons:"NavButtons_navigationButtons__1uNHt",buttonCon:"NavButtons_buttonCon__1i5A0",buttonText:"NavButtons_buttonText__3nZW1"}},38:function(e,t,n){e.exports={story:"Story_story__1bVPs",previewStory:"Story_previewStory__3Yfo_",content:"Story_content__vwEig",media:"Story_media__VHaO7"}},39:function(e,t,n){e.exports={formError:"AddStory_formError__1riru",postToggleButton:"AddStory_postToggleButton__9NIuE",postBar:"AddStory_postBar__218Sl",postBarContent:"AddStory_postBarContent__2KZHL"}},56:function(e,t,n){e.exports={"stories-list":"StoriesList_stories-list__2_DO6"}},79:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.81cb1d77.chunk.js.map