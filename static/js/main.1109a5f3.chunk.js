(this["webpackJsonpwall-app"]=this["webpackJsonpwall-app"]||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(10),o=n.n(c),i=(n(74),n(18)),s=n.n(i),l=n(13),u=n(26),j=n(11),d=n(52),h=n.n(d),b=n(3),m=function(){return Object(b.jsx)(h.a,{type:"Oval",style:{padding:"5%"},color:"#00BFFF",height:100,width:100})},p=n(133),O=n(137),f=n(138),x=n(139),v=n(35),g=n.n(v);var y=function(e){return Object(b.jsxs)(p.a,{className:e.preview?g.a.previewStory:g.a.story,children:[Object(b.jsx)(O.a,{className:g.a.media,image:e.image,title:e.title}),Object(b.jsxs)(f.a,{className:g.a.content,children:[Object(b.jsx)(x.a,{gutterBottom:!0,variant:"h2",component:"h2",children:e.title}),Object(b.jsxs)(x.a,{gutterBottom:!0,variant:"h3",component:"h3",children:["By ",e.author]}),Object(b.jsx)(x.a,{variant:"body2",color:"textSecondary",component:"p",children:e.description})]})]})},_=n(55),S=n.n(_),w=function(e){return Object(b.jsx)("ul",{className:S.a["stories-list"],children:e.stories.map((function(e){return Object(b.jsx)(y,{title:e.title,author:e.author,description:e.description,image:e.image},e.id)}))})},C=n(17),k=n(32),N=n.n(k),B=n(14),I=n(28),E=n.n(I),T=n(56),W=Object(T.a)({accessKey:"0oJhi_V8eHNlNtyOLjykytXjPWxFd79JZ7FWUduq0vk"}),L=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,e.next=4,W.search.getPhotos({query:t});case 4:e.sent.response.results.forEach((function(e){n.push({id:e.id,url:e.urls.regular})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),F=n(144),A=n(140),J=n(141),D=n(142);var H=function(e){var t=Object(r.useRef)(),n=Object(r.useState)([]),a=Object(j.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)([]),d=Object(j.a)(i,2),h=d[0],p=d[1],O=Object(r.useState)(!1),f=Object(j.a)(O,2),x=f[0],v=f[1],g=Object(r.useState)(!1),y=Object(j.a)(g,2),_=y[0],S=y[1],w=e.onImageChoice,C=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),p([]),o([]),e.next=5,L(t);case 5:n=e.sent,p(n),S(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){e.searchTerm&&C(e.searchTerm),w(null)}),[e.searchTerm,w]);var k={variant:"contained",color:"primary"};return Object(b.jsxs)("div",{className:E.a.optionalImgsCon,style:{display:e.display},children:[Object(b.jsxs)("div",{className:E.a.searchBox,children:[x?Object(b.jsx)(F.a,{inputRef:t,variant:"outlined",label:"search term.."}):Object(b.jsxs)("span",{className:E.a.searchBoxText,children:["results based on title. donts like it? ",Object(b.jsx)("br",{})]}),Object(b.jsx)("div",{className:E.a.buttonCon,children:x?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(A.a,Object(l.a)(Object(l.a)({},k),{},{onClick:function(){return C(t.current.value),void v(!1)},children:"search"})),Object(b.jsx)(A.a,Object(l.a)(Object(l.a)({},{variant:"contained",color:"secondary"}),{},{onClick:function(){return v(!1)},children:"cancel"}))]}):Object(b.jsx)(A.a,Object(l.a)(Object(l.a)({},k),{},{onClick:function(){return v(!0)},children:"click to search"}))})]}),h.length>0?Object(b.jsx)(J.a,{rowHeight:160,className:E.a.optionalImgs,cols:e.screenWidth>650?5:2,children:h.map((function(t){var n=e.chosenImg&&e.chosenImg===t.id?E.a.chosenImg:"";return Object(b.jsxs)(D.a,{className:n,cols:1,children:[Object(b.jsx)("img",{onClick:function(){return function(t){e.onImageChoice(t)}(t)},style:{display:c.includes(t.id)?"block":"none"},onLoad:function(){return e=t.id,void o((function(t){return[].concat(Object(B.a)(t),[e])}));var e},src:t.url,alt:"gallery img"}),!c.includes(t.id)&&Object(b.jsx)(m,{})]},t.id)}))}):_?"searching":"couldent find optional images for your story title."]})},P={containSpecialChars:new RegExp(/[$&+,:;=?@#|'<>.^*()%!-]/),containDigit:new RegExp(/\d/)},R=a.a.forwardRef((function(e,t){var n="description"===e.name,r=e.screenWidth<650,a={value:e.value,type:"text",variant:"outlined",label:e.label,onChange:e.onChange,style:{marginTop:r?"10%":"1%",width:r?"80%":"35%",display:e.current===e.name?"flex":"none"},rows:n?5:1};return n?Object(b.jsx)(F.a,Object(l.a)(Object(l.a)({},a),{},{multiline:!0})):Object(b.jsx)(F.a,Object(l.a)({},a))})),K=n(143),V=n(60),q=n.n(V),z=n(59),X=n.n(z),Y=n(58),Z=n.n(Y),G=function(e){var t=e.currentStep,n=e.finishStep,r=e.error,a=e.moveControl;return Object(b.jsxs)("div",{className:Z.a.navigationButtons,style:{justifyContent:"author"!==t?"space-between":"flex-end"},children:["author"!==t&&Object(b.jsxs)("span",{children:[Object(b.jsx)(K.a,{color:"primary",onClick:function(){return a("back")},children:Object(b.jsx)(X.a,{})})," ","Back"," "]}),t!==n&&Object(b.jsxs)("span",{children:["Next"," ",Object(b.jsx)(K.a,{color:"primary",style:{backgroundColor:r?"red":null},onClick:function(){return a("next")},children:Object(b.jsx)(q.a,{})})]})]})},M={author:"",title:"",image:{url:null,id:null},description:""};var U=function(e){var t=[{name:"author",title:"Who are you?",label:"Name goes here..."},{name:"title",title:"What is your story name?",label:"Title goes here..."},{name:"image",title:"Which image describe it the most?"},{name:"description",title:"So,what happen?",label:"Story goes here..."},{name:"finish",title:"Is that OK?"}],n=t[0],a=t[1],c=t[2],o=t[3],i=t[4],s=Object(r.useState)(!1),u=Object(j.a)(s,2),d=u[0],h=u[1],m=Object(r.useState)(n),p=Object(j.a)(m,2),O=p[0],f=p[1],x=Object(r.useState)(M),v=Object(j.a)(x,2),g=v[0],_=v[1],S=Object(r.useState)(null),w=Object(j.a)(S,2),k=w[0],B=w[1],I=function(){_(M),f(n)},E=Object(r.useCallback)((function(e){_((function(t){return Object(l.a)(Object(l.a)({},t),{},{image:e})}))}),[]),T=[n,a,o],W=O.name===c.name?"block":"none";return Object(b.jsxs)("div",{className:N.a.postBarContent,children:[Object(b.jsx)(A.a,{style:{alignSelf:d?"flex-start ":"center"},variant:"contained",color:"primary",className:N.a.postToggleButton,onClick:function(){return h(!d)},children:d?"fold":"post your story!"}),d&&Object(b.jsxs)("div",{className:N.a.postBar,children:[Object(b.jsx)("h2",{children:O.title}),Object(b.jsx)("div",{className:N.a.formError,style:{opacity:k?1:0},children:k}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={author:g.author,title:g.title,description:g.description,image:g.image.url};e.onAddStory(n),I()},children:[Object(b.jsx)(G,{currentStep:O.name,finishStep:i.name,moveControl:function(e){function n(){var n="next"===e?1:-1,r=t.map((function(e){return e.name})).indexOf(O.name)+n;f(t[r])}if(B(null),"next"===e){var r=g[O.name],a=function(e,t){var n=null;if("image"===e)null===t&&(n="must choose an image");else{var r=t.trim();switch(e){case"author":""===r?n="provide your name above.":P.containSpecialChars.test(r)||P.containDigit.test(r)?n="provide name with out spiceal chars or digits":r.length<2&&(n="this name is too short.");break;case"title":""===r&&(n="provide your title above.");break;case"description":""===r&&(n="provide your description above.")}}return n}(O.name,r);a?B(a):n()}else n()},error:k}),T.map((function(t){return Object(b.jsx)(R,{name:t.name,current:O.name,label:t.label,screenWidth:e.screenWidth,onChange:function(e){return n=t.name,r=e.target.value,_((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(C.a)({},n,r))})),void B(null);var n,r},value:g[t.name]},t.name)})),Object(b.jsx)(H,{display:W,chosenImg:g.image?g.image.id:null,onImageChoice:E,searchTerm:g.title,screenWidth:e.screenWidth}),O.name===i.name&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(y,{preview:!0,title:g.title,author:g.author,description:g.description,image:g.image.url}),Object(b.jsx)(A.a,{variant:"contained",color:"primary",type:"submit",className:N.a.clickToSearch,children:"Looks good. Post It!"})]})]})]})]})};n(101);var $=function(){var e=Object(r.useState)(window.innerWidth),t=Object(j.a)(e,2),n=t[0],c=t[1],o=function(){c(window.innerWidth)};Object(r.useEffect)((function(){return window.addEventListener("resize",o),function(){return window.removeEventListener("resize",o)}}),[]);var i,d=Object(r.useState)([]),h=Object(j.a)(d,2),p=h[0],O=h[1],f=Object(r.useState)(null),x=Object(j.a)(f,2),v=x[0],g=x[1],y=Object(r.useState)(!1),_=Object(j.a)(y,2),S=_[0],C=_[1],k=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t,n,r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(null),C(!0),e.prev=2,e.next=5,fetch("https://react-http-de690-default-rtdb.firebaseio.com/stories.json");case 5:return t=e.sent,e.next=8,t.json();case 8:for(a in n=e.sent,r=[],n)c=n[a],r.push(Object(l.a)({id:a},c));O(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),g("Failed to reach the server");case 17:C(!1);case 18:case"end":return e.stop()}}),e,null,[[2,14]])}))),[]);Object(r.useEffect)((function(){k()}),[k]);var N=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://react-http-de690-default-rtdb.firebaseio.com/stories.json",{method:"POST",body:JSON.stringify(t),"Content-Type":"application/json"});case 3:k(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),g("Failed to save movie on server");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return p.length>0&&(i=Object(b.jsx)(w,{stories:p})),0===p.length&&(i=Object(b.jsx)("p",{children:"No stories..."})),v&&(i=Object(b.jsx)("p",{children:v})),S&&(i=Object(b.jsx)(m,{})),Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsx)("section",{children:Object(b.jsx)("h1",{children:"Wall to all (: "})}),Object(b.jsx)("section",{children:Object(b.jsx)(U,{screenWidth:n,onAddStory:N})}),Object(b.jsx)("section",{children:i})]})};o.a.render(Object(b.jsx)($,{}),document.getElementById("root"))},28:function(e,t,n){e.exports={optionalImgsCon:"ImgList_optionalImgsCon__2YE6M",optionalImgs:"ImgList_optionalImgs__3mtgb",chosenImg:"ImgList_chosenImg__19cJS",searchBox:"ImgList_searchBox__3OGjD",buttonCon:"ImgList_buttonCon__2C0oN",searchBoxText:"ImgList_searchBoxText__2X90j"}},32:function(e,t,n){e.exports={formError:"AddStory_formError__1riru",postToggleButton:"AddStory_postToggleButton__9NIuE",postBarContent:"AddStory_postBarContent__2KZHL",postBar:"AddStory_postBar__218Sl"}},35:function(e,t,n){e.exports={story:"Story_story__1bVPs",previewStory:"Story_previewStory__3Yfo_",content:"Story_content__vwEig",media:"Story_media__VHaO7"}},55:function(e,t,n){e.exports={"stories-list":"StoriesList_stories-list__2_DO6"}},58:function(e,t,n){e.exports={navigationButtons:"NavButtons_navigationButtons__1uNHt"}},74:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.1109a5f3.chunk.js.map